<!DOCTYPE html>
<html lang="cs" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <title>Nastavit nové heslo</title>
    <!-- Bootstrap CDN + vlastní CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" th:href="@{/css/app.css}">
    <style>
        /* stejné stylingové zasazení jako login/forgot */
        body {
            background-color:#f8f9fa;
            display:flex; align-items:center; justify-content:center;
            min-height:100vh;
            font-family: system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;
        }
        .login-card {
            width:100%; max-width:380px; background:#fff;
            border:1px solid #dee2e6; border-radius:.75rem;
            box-shadow:0 4px 18px rgba(0,0,0,.06); padding:2rem;
        }
    </style>
</head>
<body>
<div class="login-card">

    <!-- Nadpis stránky -->
    <h2 class="mb-3">Nové heslo</h2>

    <!-- Flash zprávy (volitelné): kontroluj v kontroleru, nastavuješ např. toastError/toastSuccess -->
    <div th:if="${toastError}" class="alert alert-danger py-2" th:text="${toastError}"></div>
    <div th:if="${toastSuccess}" class="alert alert-success py-2" th:text="${toastSuccess}"></div>
    <div th:if="${toastInfo}" class="alert alert-info py-2" th:text="${toastInfo}"></div>

    <!-- Formulář: POST /reset-password -->
    <form th:action="@{/reset-password}" method="post" class="mt-3">
        <!-- CSRF ochrana -->
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>

        <!-- Reset token (např. z mailového odkazu) předaný modelem -->
        <input type="hidden" name="token" th:value="${token}"/>

        <!-- Nové heslo + potvrzení; frontendově jen minimální validace (minlength),
             hlavní validaci provede backend (shoda, síla hesla atd.) -->
        <div class="mb-3">
            <label for="password" class="form-label">Nové heslo</label>
            <input id="password" class="form-control" type="password" name="password" minlength="4" required/>
        </div>

        <div class="mb-3">
            <label for="confirm" class="form-label">Potvrzení hesla</label>
            <input id="confirm" class="form-control" type="password" name="confirm" minlength="4" required/>
        </div>

        <button class="btn btn-primary w-100" type="submit">Změnit heslo</button>
    </form>

    <!-- Link zpět na login -->
    <div class="text-center mt-3">
        <a th:href="@{/login}" class="text-decoration-none">← Zpět na přihlášení</a>
    </div>
</div>
</body>
</html>
